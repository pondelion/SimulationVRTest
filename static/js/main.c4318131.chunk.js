(this["webpackJsonpsimulation-vr"]=this["webpackJsonpsimulation-vr"]||[]).push([[0],{129:function(e,t,n){},130:function(e,t,n){"use strict";n.r(t);var o=n(9),a=n(0),i=n.n(a),c=n(12),r=n.n(c),s=(n(86),n(167)),l=n(2),d=n(7),h=n(15),u=n(18),p=n(14),b=n(5),m=n(6),v=n(3),j=function(){function e(){Object(l.a)(this,e)}return Object(d.a)(e,null,[{key:"createButton",value:function(e,t){t&&console.error('THREE.VRButton: The "options" parameter has been removed. Please set the reference space type via renderer.xr.setReferenceSpaceType() instead.');var n=document.createElement("button");function o(){n.style.display="",n.style.cursor="auto",n.style.left="calc(50% - 75px)",n.style.width="150px",n.onmouseenter=null,n.onmouseleave=null,n.onclick=null,n.textContent="VR NOT SUPPORTED"}function a(e){e.style.position="absolute",e.style.bottom="20px",e.style.padding="12px 6px",e.style.border="1px solid #fff",e.style.borderRadius="4px",e.style.background="rgba(0,0,0,0.1)",e.style.color="#fff",e.style.font="normal 13px sans-serif",e.style.textAlign="center",e.style.opacity="0.5",e.style.outline="none",e.style.zIndex="999"}if("xr"in navigator)return n.id="VRButton",n.style.display="none",a(n),navigator.xr.isSessionSupported("immersive-vr").then((function(t){t?function(){var t=null;function o(o){o.addEventListener("end",a),e.xr.setSession(o),n.textContent="EXIT VR",t=o}function a(){t.removeEventListener("end",a),n.textContent="ENTER VR",t=null}n.style.display="",n.style.cursor="pointer",n.style.left="calc(50% - 50px)",n.style.width="100px",n.textContent="ENTER VR",n.onmouseenter=function(){n.style.opacity="1.0"},n.onmouseleave=function(){n.style.opacity="0.5"},n.onclick=function(){null===t?navigator.xr.requestSession("immersive-vr",{optionalFeatures:["local-floor","bounded-floor","hand-tracking"]}).then(o):t.end()}}():o()})),n;var i=document.createElement("a");return!1===window.isSecureContext?(i.href=document.location.href.replace(/^http:/,"https:"),i.innerHTML="WEBXR NEEDS HTTPS"):(i.href="https://immersiveweb.dev/",i.innerHTML="WEBXR NOT AVAILABLE"),i.style.left="calc(50% - 90px)",i.style.width="180px",i.style.textDecoration="none",a(i),i}}]),e}(),f=function(e,t){void 0===t&&console.warn('THREE.OrbitControls: The second parameter "domElement" is now mandatory.'),t===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),this.object=e,this.domElement=t,this.enabled=!0,this.target=new v.C,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={LEFT:v.j.ROTATE,MIDDLE:v.j.DOLLY,RIGHT:v.j.PAN},this.touches={ONE:v.x.ROTATE,TWO:v.x.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return l.phi},this.getAzimuthalAngle=function(){return l.theta},this.listenToKeyEvents=function(e){e.addEventListener("keydown",F),this._domElementKeyEvents=e},this.saveState=function(){n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.reset=function(){n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(o),n.update(),r=c.NONE},this.update=function(){var t=new v.C,a=(new v.p).setFromUnitVectors(e.up,new v.C(0,1,0)),i=a.clone().invert(),b=new v.C,m=new v.p,j=2*Math.PI;return function(){var e=n.object.position;t.copy(e).sub(n.target),t.applyQuaternion(a),l.setFromVector3(t),n.autoRotate&&r===c.NONE&&E(2*Math.PI/60/60*n.autoRotateSpeed),n.enableDamping?(l.theta+=d.theta*n.dampingFactor,l.phi+=d.phi*n.dampingFactor):(l.theta+=d.theta,l.phi+=d.phi);var v=n.minAzimuthAngle,f=n.maxAzimuthAngle;return isFinite(v)&&isFinite(f)&&(v<-Math.PI?v+=j:v>Math.PI&&(v-=j),f<-Math.PI?f+=j:f>Math.PI&&(f-=j),l.theta=v<=f?Math.max(v,Math.min(f,l.theta)):l.theta>(v+f)/2?Math.max(v,l.theta):Math.min(f,l.theta)),l.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,l.phi)),l.makeSafe(),l.radius*=h,l.radius=Math.max(n.minDistance,Math.min(n.maxDistance,l.radius)),!0===n.enableDamping?n.target.addScaledVector(u,n.dampingFactor):n.target.add(u),t.setFromSpherical(l),t.applyQuaternion(i),e.copy(n.target).add(t),n.object.lookAt(n.target),!0===n.enableDamping?(d.theta*=1-n.dampingFactor,d.phi*=1-n.dampingFactor,u.multiplyScalar(1-n.dampingFactor)):(d.set(0,0,0),u.set(0,0,0)),h=1,!!(p||b.distanceToSquared(n.object.position)>s||8*(1-m.dot(n.object.quaternion))>s)&&(n.dispatchEvent(o),b.copy(n.object.position),m.copy(n.object.quaternion),p=!1,!0)}}(),this.dispose=function(){n.domElement.removeEventListener("contextmenu",V),n.domElement.removeEventListener("pointerdown",U),n.domElement.removeEventListener("wheel",K),n.domElement.removeEventListener("touchstart",X),n.domElement.removeEventListener("touchend",W),n.domElement.removeEventListener("touchmove",Z),n.domElement.ownerDocument.removeEventListener("pointermove",Y),n.domElement.ownerDocument.removeEventListener("pointerup",H),null!==n._domElementKeyEvents&&n._domElementKeyEvents.removeEventListener("keydown",F)};var n=this,o={type:"change"},a={type:"start"},i={type:"end"},c={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},r=c.NONE,s=1e-6,l=new v.t,d=new v.t,h=1,u=new v.C,p=!1,b=new v.B,m=new v.B,j=new v.B,f=new v.B,g=new v.B,y=new v.B,O=new v.B,w=new v.B,_=new v.B;function x(){return Math.pow(.95,n.zoomSpeed)}function E(e){d.theta-=e}function k(e){d.phi-=e}var T=function(){var e=new v.C;return function(t,n){e.setFromMatrixColumn(n,0),e.multiplyScalar(-t),u.add(e)}}(),P=function(){var e=new v.C;return function(t,o){!0===n.screenSpacePanning?e.setFromMatrixColumn(o,1):(e.setFromMatrixColumn(o,0),e.crossVectors(n.object.up,e)),e.multiplyScalar(t),u.add(e)}}(),C=function(){var e=new v.C;return function(t,o){var a=n.domElement;if(n.object.isPerspectiveCamera){var i=n.object.position;e.copy(i).sub(n.target);var c=e.length();c*=Math.tan(n.object.fov/2*Math.PI/180),T(2*t*c/a.clientHeight,n.object.matrix),P(2*o*c/a.clientHeight,n.object.matrix)}else n.object.isOrthographicCamera?(T(t*(n.object.right-n.object.left)/n.object.zoom/a.clientWidth,n.object.matrix),P(o*(n.object.top-n.object.bottom)/n.object.zoom/a.clientHeight,n.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),n.enablePan=!1)}}();function R(e){n.object.isPerspectiveCamera?h/=e:n.object.isOrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom*e)),n.object.updateProjectionMatrix(),p=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function A(e){n.object.isPerspectiveCamera?h*=e:n.object.isOrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/e)),n.object.updateProjectionMatrix(),p=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function L(e){b.set(e.clientX,e.clientY)}function S(e){f.set(e.clientX,e.clientY)}function M(e){if(1==e.touches.length)b.set(e.touches[0].pageX,e.touches[0].pageY);else{var t=.5*(e.touches[0].pageX+e.touches[1].pageX),n=.5*(e.touches[0].pageY+e.touches[1].pageY);b.set(t,n)}}function D(e){if(1==e.touches.length)f.set(e.touches[0].pageX,e.touches[0].pageY);else{var t=.5*(e.touches[0].pageX+e.touches[1].pageX),n=.5*(e.touches[0].pageY+e.touches[1].pageY);f.set(t,n)}}function N(e){var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY,o=Math.sqrt(t*t+n*n);O.set(0,o)}function I(e){if(1==e.touches.length)m.set(e.touches[0].pageX,e.touches[0].pageY);else{var t=.5*(e.touches[0].pageX+e.touches[1].pageX),o=.5*(e.touches[0].pageY+e.touches[1].pageY);m.set(t,o)}j.subVectors(m,b).multiplyScalar(n.rotateSpeed);var a=n.domElement;E(2*Math.PI*j.x/a.clientHeight),k(2*Math.PI*j.y/a.clientHeight),b.copy(m)}function z(e){if(1==e.touches.length)g.set(e.touches[0].pageX,e.touches[0].pageY);else{var t=.5*(e.touches[0].pageX+e.touches[1].pageX),o=.5*(e.touches[0].pageY+e.touches[1].pageY);g.set(t,o)}y.subVectors(g,f).multiplyScalar(n.panSpeed),C(y.x,y.y),f.copy(g)}function B(e){var t=e.touches[0].pageX-e.touches[1].pageX,o=e.touches[0].pageY-e.touches[1].pageY,a=Math.sqrt(t*t+o*o);w.set(0,a),_.set(0,Math.pow(w.y/O.y,n.zoomSpeed)),R(_.y),O.copy(w)}function U(e){if(!1!==n.enabled)switch(e.pointerType){case"mouse":case"pen":!function(e){var t;switch(e.preventDefault(),n.domElement.focus?n.domElement.focus():window.focus(),e.button){case 0:t=n.mouseButtons.LEFT;break;case 1:t=n.mouseButtons.MIDDLE;break;case 2:t=n.mouseButtons.RIGHT;break;default:t=-1}switch(t){case v.j.DOLLY:if(!1===n.enableZoom)return;!function(e){O.set(e.clientX,e.clientY)}(e),r=c.DOLLY;break;case v.j.ROTATE:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===n.enablePan)return;S(e),r=c.PAN}else{if(!1===n.enableRotate)return;L(e),r=c.ROTATE}break;case v.j.PAN:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===n.enableRotate)return;L(e),r=c.ROTATE}else{if(!1===n.enablePan)return;S(e),r=c.PAN}break;default:r=c.NONE}r!==c.NONE&&(n.domElement.ownerDocument.addEventListener("pointermove",Y),n.domElement.ownerDocument.addEventListener("pointerup",H),n.dispatchEvent(a))}(e)}}function Y(e){if(!1!==n.enabled)switch(e.pointerType){case"mouse":case"pen":!function(e){if(!1===n.enabled)return;switch(e.preventDefault(),r){case c.ROTATE:if(!1===n.enableRotate)return;!function(e){m.set(e.clientX,e.clientY),j.subVectors(m,b).multiplyScalar(n.rotateSpeed);var t=n.domElement;E(2*Math.PI*j.x/t.clientHeight),k(2*Math.PI*j.y/t.clientHeight),b.copy(m),n.update()}(e);break;case c.DOLLY:if(!1===n.enableZoom)return;!function(e){w.set(e.clientX,e.clientY),_.subVectors(w,O),_.y>0?R(x()):_.y<0&&A(x()),O.copy(w),n.update()}(e);break;case c.PAN:if(!1===n.enablePan)return;!function(e){g.set(e.clientX,e.clientY),y.subVectors(g,f).multiplyScalar(n.panSpeed),C(y.x,y.y),f.copy(g),n.update()}(e)}}(e)}}function H(e){switch(e.pointerType){case"mouse":case"pen":!function(e){if(n.domElement.ownerDocument.removeEventListener("pointermove",Y),n.domElement.ownerDocument.removeEventListener("pointerup",H),!1===n.enabled)return;n.dispatchEvent(i),r=c.NONE}()}}function K(e){!1===n.enabled||!1===n.enableZoom||r!==c.NONE&&r!==c.ROTATE||(e.preventDefault(),e.stopPropagation(),n.dispatchEvent(a),function(e){e.deltaY<0?A(x()):e.deltaY>0&&R(x()),n.update()}(e),n.dispatchEvent(i))}function F(e){!1!==n.enabled&&!1!==n.enablePan&&function(e){var t=!1;switch(e.keyCode){case n.keys.UP:C(0,n.keyPanSpeed),t=!0;break;case n.keys.BOTTOM:C(0,-n.keyPanSpeed),t=!0;break;case n.keys.LEFT:C(n.keyPanSpeed,0),t=!0;break;case n.keys.RIGHT:C(-n.keyPanSpeed,0),t=!0}t&&(e.preventDefault(),n.update())}(e)}function X(e){if(!1!==n.enabled){switch(e.preventDefault(),e.touches.length){case 1:switch(n.touches.ONE){case v.x.ROTATE:if(!1===n.enableRotate)return;M(e),r=c.TOUCH_ROTATE;break;case v.x.PAN:if(!1===n.enablePan)return;D(e),r=c.TOUCH_PAN;break;default:r=c.NONE}break;case 2:switch(n.touches.TWO){case v.x.DOLLY_PAN:if(!1===n.enableZoom&&!1===n.enablePan)return;!function(e){n.enableZoom&&N(e),n.enablePan&&D(e)}(e),r=c.TOUCH_DOLLY_PAN;break;case v.x.DOLLY_ROTATE:if(!1===n.enableZoom&&!1===n.enableRotate)return;!function(e){n.enableZoom&&N(e),n.enableRotate&&M(e)}(e),r=c.TOUCH_DOLLY_ROTATE;break;default:r=c.NONE}break;default:r=c.NONE}r!==c.NONE&&n.dispatchEvent(a)}}function Z(e){if(!1!==n.enabled)switch(e.preventDefault(),e.stopPropagation(),r){case c.TOUCH_ROTATE:if(!1===n.enableRotate)return;I(e),n.update();break;case c.TOUCH_PAN:if(!1===n.enablePan)return;z(e),n.update();break;case c.TOUCH_DOLLY_PAN:if(!1===n.enableZoom&&!1===n.enablePan)return;!function(e){n.enableZoom&&B(e),n.enablePan&&z(e)}(e),n.update();break;case c.TOUCH_DOLLY_ROTATE:if(!1===n.enableZoom&&!1===n.enableRotate)return;!function(e){n.enableZoom&&B(e),n.enableRotate&&I(e)}(e),n.update();break;default:r=c.NONE}}function W(e){!1!==n.enabled&&(n.dispatchEvent(i),r=c.NONE)}function V(e){!1!==n.enabled&&e.preventDefault()}n.domElement.addEventListener("contextmenu",V),n.domElement.addEventListener("pointerdown",U),n.domElement.addEventListener("wheel",K),n.domElement.addEventListener("touchstart",X),n.domElement.addEventListener("touchend",W),n.domElement.addEventListener("touchmove",Z),this.update()};(f.prototype=Object.create(v.g.prototype)).constructor=f;var g=function(e,t){f.call(this,e,t),this.screenSpacePanning=!1,this.mouseButtons.LEFT=v.j.PAN,this.mouseButtons.RIGHT=v.j.ROTATE,this.touches.ONE=v.x.PAN,this.touches.TWO=v.x.DOLLY_ROTATE};(g.prototype=Object.create(v.g.prototype)).constructor=g;var y=function(e){Object(b.a)(n,e);var t=Object(m.a)(n);function n(e){var o;Object(l.a)(this,n),(o=t.call(this,e))._scene=void 0,o._camera=void 0,o._renderer=void 0,o._container=null,o._objects=[],o._cnt=0,o._orbitControls=null,o._isKeyDown={},o._lookAt=new v.C(0,0,0),o._bgColor=new v.e("#b4bad2"),o._raycaster=new v.q,o._mousePos={x:0,y:0},o._intersectedObj=null,o._lastIntersectedObj=null,o._clock=new v.d,o._takeImageSnapshot=!1,o._imageURL=null,o._scene=new v.r;var a=o.props.width,i=o.props.height;return o._camera=new v.n(45,a/i,.1,1e3),o._camera.position.x=o.props.cameraPos.x,o._camera.position.y=o.props.cameraPos.y,o._camera.position.z=o.props.cameraPos.z,o._lookAt=void 0===e.lookAt?new v.C(0,0,0):new v.C(e.lookAt.x,e.lookAt.y,e.lookAt.z),o._camera.lookAt(new v.C(o._lookAt.x,o._lookAt.y,o._lookAt.z)),o._renderer=new v.D({antialias:!0}),o._renderer.setSize(a,i),void 0!==e.bgColor&&(o._bgColor=e.bgColor),o._renderer.setClearColor(o._bgColor),o._renderer.shadowMap.enabled=!0,o._renderer.xr.enabled=!0,o._raycaster=new v.q,o._intersectedObj=null,o._lastIntersectedObj=null,o._clock=new v.d,o._clock.getElapsedTime(),o.createObjects=o.createObjects.bind(Object(h.a)(o)),o.update=o.update.bind(Object(h.a)(o)),o.handleKeyDown=o.handleKeyDown.bind(Object(h.a)(o)),o.handleKeyUp=o.handleKeyUp.bind(Object(h.a)(o)),o.handleMouseMove=o.handleMouseMove.bind(Object(h.a)(o)),o}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=this;this._objects.map((function(t){return e._scene.add(t.obj)})),this._container&&(this._container.appendChild(this._renderer.domElement),this._orbitControls=new f(this._camera,this._container),this._orbitControls.target.set(0,0,0),this._orbitControls.update()),this.start(),r.a.render(Object(o.jsx)("div",{id:"vr_button"}),document.body.appendChild(j.createButton(this._renderer))),window.addEventListener("keydown",this.handleKeyDown),window.addEventListener("keyup",this.handleKeyUp),window.addEventListener("mousemove",this.handleMouseMove)}},{key:"handleKeyDown",value:function(e){this._isKeyDown["key_".concat(e.key)]=!0}},{key:"handleKeyUp",value:function(e){this._isKeyDown["key_".concat(e.key)]=!1}},{key:"isKeyPressed",value:function(e){return this._isKeyDown["key_".concat(e)]}},{key:"handleMouseMove",value:function(e){this._mousePos.x=e.clientX/window.innerWidth*2-1,this._mousePos.y=-e.clientY/window.innerHeight*2+1}},{key:"componentWillUnmount",value:function(){this.stop(),this._container&&this._container.removeChild(this._renderer.domElement)}},{key:"start",value:function(){var e=this;this._renderer.setAnimationLoop((function(){e._cnt+=1,e.update(e._clock.getDelta()),e._renderer.render(e._scene,e._camera),e._takeImageSnapshot&&(e._imageURL=e._renderer.domElement.toDataURL())}))}},{key:"stop",value:function(){}},{key:"update",value:function(e){this._raycaster.setFromCamera(new v.B(this._mousePos.x,this._mousePos.y),this._camera);var t=this._raycaster.intersectObject(this._scene,!0);if(t.length>0){var n=t[0].object;this._intersectedObj=n}else null!=this._intersectedObj&&(this._lastIntersectedObj=this._intersectedObj,this._intersectedObj=null)}},{key:"createObjects",value:function(){return[]}},{key:"onObjectsUpdated",value:function(){var e=this;this._scene.remove.apply(this._scene,this._scene.children),this._objects.map((function(t){return e._scene.add(t.obj)}));var t=new v.a(16777215,.5);this._scene.add(t);var n=new v.u(16777215,2,100,Math.PI/4,1);n.position.set(2,7,2),n.castShadow=!0,this._scene.add(n),this.forceUpdate()}},{key:"addObject",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this._objects.push(e),t&&this.onObjectsUpdated()}},{key:"addObjects",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this._objects=this._objects.concat(e),t&&this.onObjectsUpdated()}},{key:"getCamPos",value:function(){return this._camera.position}},{key:"setCamPos",value:function(e,t,n){this._camera.position.set(e,t,n)}},{key:"render",value:function(){var e=this;return Object(o.jsxs)("div",{children:[Object(o.jsx)("div",{style:{width:this.props.width,height:this.props.height},ref:function(t){e._container=t}}),Object(o.jsx)("div",{id:"vr_button"}),Object(o.jsx)("input",{type:"button",value:"save image"})]})}}]),n}(i.a.Component),O=function(){function e(){Object(l.a)(this,e)}return Object(d.a)(e,null,[{key:"createSphere",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2284834,c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:v.h,r=arguments.length>7?arguments[7]:void 0,s=o,l=new v.s(s,20,20),d={color:i,opacity:a,transparent:!0,side:c,depthWrite:!1};void 0!==r&&(d.map=(new v.z).load(r));var h=new v.l(d),u=new v.k(l,h);return u.position.x=e,u.position.y=t,u.position.z=n,u.castShadow=!0,u}},{key:"createBox",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1,r=arguments.length>7&&void 0!==arguments[7]?arguments[7]:16711680,s=arguments.length>8&&void 0!==arguments[8]?arguments[8]:v.h,l=arguments.length>9?arguments[9]:void 0,d={color:r,opacity:c,transparent:!0,side:s,depthWrite:!1};void 0!==l&&(d.map=(new v.z).load(l));var h=new v.k(new v.c(o,a,i),new v.m(d));return h.receiveShadow=!0,h.position.set(e,t,n),h}},{key:"createPlane",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-.5*Math.PI,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1,r=arguments.length>7&&void 0!==arguments[7]?arguments[7]:16777215,s=arguments.length>8&&void 0!==arguments[8]?arguments[8]:3,l=arguments.length>9&&void 0!==arguments[9]?arguments[9]:3,d=arguments.length>10&&void 0!==arguments[10]?arguments[10]:v.f,h=arguments.length>11?arguments[11]:void 0,u=new v.o(l,s,1,1),p={color:r,opacity:c,transparent:!0,side:d};void 0!==h&&(p.map=(new v.z).load(h));var b=new v.m(p),m=new v.k(u,b);return m.receiveShadow=!0,m.castShadow=!0,m.rotation.set(o,a,i),m.position.set(e,t,n),m}},{key:"createArrow",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,r=arguments.length>7&&void 0!==arguments[7]?arguments[7]:-Math.PI,s=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,l=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,d=arguments.length>10&&void 0!==arguments[10]?arguments[10]:.8,h=arguments.length>11&&void 0!==arguments[11]?arguments[11]:65280,u=arguments.length>12&&void 0!==arguments[12]?arguments[12]:.3,p=arguments.length>13&&void 0!==arguments[13]?arguments[13]:.3,b=new v.C(a,i,c),m=new v.C(t,n,o),j=new v.b(b,m,d,h,u,p);return j.name=e,j.rotation.x=r,j.rotation.y=s,j.rotation.z=l,j}},{key:"createSprite",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.2,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:238,i=new v.w({color:a}),c=new v.v(i);return c.position.x=e,c.position.y=t,c.position.z=n,c.scale.x=o,c.scale.y=o,c.scale.z=o,c}},{key:"createTorusKnot",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.4,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:64,c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:8,r=arguments.length>7&&void 0!==arguments[7]?arguments[7]:2,s=arguments.length>8&&void 0!==arguments[8]?arguments[8]:3,l=arguments.length>9&&void 0!==arguments[9]?arguments[9]:1,d=arguments.length>10&&void 0!==arguments[10]?arguments[10]:6724095,h=arguments.length>11&&void 0!==arguments[11]?arguments[11]:.5,u=arguments.length>12&&void 0!==arguments[12]?arguments[12]:v.h,p=arguments.length>13?arguments[13]:void 0,b=new v.A(o,a,i,c,r,s),m={color:d,opacity:l,transparent:!0,side:u,roughness:h};void 0!==p&&(m.map=(new v.z).load(p));var j=new v.m(m),f=new v.k(b,j);return f.receiveShadow=!0,f.castShadow=!0,f.position.set(e,t,n),f}}]),e}(),w=function(e){Object(b.a)(n,e);var t=Object(m.a)(n);function n(e){var o;return Object(l.a)(this,n),(o=t.call(this,e))._objects=o.createObjects(),o.update=o.update.bind(Object(h.a)(o)),o.createObjects=o.createObjects.bind(Object(h.a)(o)),o.forceUpdate(),o}return Object(d.a)(n,[{key:"update",value:function(e){Object(u.a)(Object(p.a)(n.prototype),"update",this).call(this,e)}},{key:"createObjects",value:function(){var e=Object(u.a)(Object(p.a)(n.prototype),"createObjects",this).call(this);return e.push({tag:"x_axis",obj:O.createArrow("x_axis",0,0,0,1,0,0,.5*Math.PI,0,0,6,16711680,.5,.5),objType:"arrow"}),e.push({tag:"y_axis",obj:O.createArrow("y_axis",0,0,0,0,1,0,0,.5*Math.PI,0,6,65280,.6,.6),objType:"arrow"}),e.push({tag:"z_axis",obj:O.createArrow("z_axis",0,0,0,0,0,1,0,0,.5*Math.PI,6,255,.6,.6),objType:"arrow"}),e}}]),n}(y),_=function(e){Object(b.a)(n,e);var t=Object(m.a)(n);function n(e){var o;return Object(l.a)(this,n),(o=t.call(this,e)).update=o.update.bind(Object(h.a)(o)),o.createObjects=o.createObjects.bind(Object(h.a)(o)),o._objects=o.createObjects(),o.onObjectsUpdated(),o.forceUpdate(),o}return Object(d.a)(n,[{key:"update",value:function(e){Object(u.a)(Object(p.a)(n.prototype),"update",this).call(this,e);var t=this._objects.findIndex((function(e){return"box1"===e.tag}));(this._objects[t].obj.rotation.x+=.01,this._objects[t].obj.rotation.y+=.01,this.isKeyPressed("ArrowUp")&&(this._objects[t].obj.position.y+=.1),this.isKeyPressed("ArrowDown")&&(this._objects[t].obj.position.y-=.1),this.isKeyPressed("ArrowRight")&&(this._objects[t].obj.position.x+=.1),this.isKeyPressed("ArrowLeft")&&(this._objects[t].obj.position.x-=.1),null!==this._intersectedObj&&"Mesh"===this._intersectedObj.type)?(this._intersectedObj.material.color.set(16777215*Math.random()),this._intersectedObj.scale.set(1.5,1.5,1.5)):null!==this._lastIntersectedObj&&"Mesh"===this._lastIntersectedObj.type&&this._lastIntersectedObj.scale.set(1,1,1);t=this._objects.findIndex((function(e){return"plane1"===e.tag})),this._objects[t].obj.position.y=Math.sin(1*this._clock.getElapsedTime())}},{key:"createObjects",value:function(){var e=Object(u.a)(Object(p.a)(n.prototype),"createObjects",this).call(this);return e.push({tag:"box1",obj:O.createTorusKnot(0,.2,0),objType:"box"}),e.push({tag:"plane1",obj:O.createPlane(0,0,0,-.5*Math.PI,0,0,.6,16777215,10,10,v.f,"https://threejsfundamentals.org/threejs/resources/images/wall.jpg"),objType:"plane"}),e}}]),n}(w),x=n(67),E=n(25),k=n.n(E),T=n(32),P=n(169),C=n(170),R=n(50),A=n.n(R),L=n(68),S=n(51),M=n.n(S),D="127.0.0.1",N=8e3,I=null;(function(){var e=Object(L.a)(A.a.mark((function e(){var t;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t="http://".concat(D,":").concat(N,"/healthcheck"),null===I){e.next=3;break}return e.abrupt("return",I);case 3:return e.next=5,k.a.get(t,{timeout:4e3}).then((function(e){return"http://".concat(D,":").concat(N,"/api")})).catch((function(e){console.log(e),M.a.fire("https://".concat(D,":").concat(N," is not available. Using lambda backend instead. This could take long time."));return"https://qbhsm9w8if.execute-api.ap-northeast-1.amazonaws.com/api"}));case 5:return I=e.sent,e.abrupt("return",I);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()();var z=function(){return null===I&&M.a.fire("Still checking server availability. Try again."),I},B=function(e){Object(b.a)(n,e);var t=Object(m.a)(n);function n(e){var o,a;Object(l.a)(this,n),(a=t.call(this,e))._open=!0,a._objects=Object(u.a)((o=Object(h.a)(a),Object(p.a)(n.prototype)),"createObjects",o).call(o),a._open=!0;var i=z(),c="".concat(i,"/digit_distdata/3");return console.log(c),k.a.get(c).then((function(e){var t=e.data.data,n=e.data.label;console.log("start creating objs");var o=T[0].concat(T[2]),i=t.map((function(e,t){return{tag:"sphere".concat(t),obj:O.createSphere(4*e[0],4*e[1],4*e[2],.1,.7,o[n[t]]),objType:"sphere"}}));a._objects=a._objects.concat(i),a.onObjectsUpdated(),console.log("done creating objs"),a._open=!1,a.forceUpdate()})).catch((function(e){console.log(e),a._open=!1,a.forceUpdate(),alert("Could not fetch data from backend server ".concat(c," : ").concat(e))})),a}return Object(d.a)(n,[{key:"render",value:function(){var e=this;return Object(o.jsxs)("div",{children:[Object(u.a)(Object(p.a)(n.prototype),"render",this).call(this),Object(o.jsx)(P.a,{open:this._open,onClose:function(){e._open=!1},children:Object(o.jsx)(C.a,{id:"simple-dialog-title",children:"Loading Data...."})})]})}}]),n}(w),U=n(70),Y=function(e){Object(b.a)(n,e);var t=Object(m.a)(n);function n(e){var o,a;Object(l.a)(this,n),(a=t.call(this,e))._open=!0,a._objects=Object(u.a)((o=Object(h.a)(a),Object(p.a)(n.prototype)),"createObjects",o).call(o),a._open=!0;var i=z(),c="".concat(i,"/financial_distdata/3");return k.a.get(c).then((function(e){var t=e.data.data,n=e.data.company_name,o=e.data.class;console.log("start creating objs");var i=T[0].concat(T[2]).concat(T[3]).concat(T[4]),c=t.slice(0,800).map((function(e,t){return{tag:"sphere".concat(t),obj:O.createSphere(5*e[0],5*e[1],5*e[2],.1,.7,i[o[t]]),objType:"sphere"}}));a._objects=a._objects.concat(c);var r=n.slice(0,100).map((function(e,n){var o=new U.a(e);return o.position.set(5*t[n][0],5*t[n][1],5*t[n][2]),o.textHeight=.15,o.color="#FF0000",{tag:"text".concat(n),obj:o,objType:"other"}}));a._objects=a._objects.concat(r),a.onObjectsUpdated(),console.log("done creating objs"),a._open=!1,a.forceUpdate()})).catch((function(e){console.log(e),a._open=!1,a.forceUpdate(),alert("Could not fetch data from backend server ".concat(c," : ").concat(e))})),a}return Object(d.a)(n,[{key:"render",value:function(){var e=this;return Object(o.jsxs)("div",{children:[Object(u.a)(Object(p.a)(n.prototype),"render",this).call(this),Object(o.jsx)(P.a,{open:this._open,onClose:function(){e._open=!1},children:Object(o.jsx)(C.a,{id:"simple-dialog-title",children:"Loading Data...."})})]})}}]),n}(w),H=n(165),K=n(166),F=function(){function e(){Object(l.a)(this,e)}return Object(d.a)(e,null,[{key:"saveImage",value:function(e,t,n){var o=z();if(null===o||(null===o||void 0===o?void 0:o.includes("amazonaws")))console.log("saveImage failed");else{var a="".concat(o,"/save_image"),i="".concat(t,"/").concat(n);k.a.post(a,null,{params:{image_url:e,filepath:i}})}}}]),e}(),X=function(e){Object(b.a)(n,e);var t=Object(m.a)(n);function n(e){var o;return Object(l.a)(this,n),(o=t.call(this,e)).startRecord=o.startRecord.bind(Object(h.a)(o)),o.stopRecord=o.stopRecord.bind(Object(h.a)(o)),o}return Object(d.a)(n,[{key:"startRecord",value:function(){this._takeImageSnapshot=!0,console.log("saveImage"),null!==this._imageURL&&F.saveImage(this._imageURL,"capture","test.jpg")}},{key:"stopRecord",value:function(){this._takeImageSnapshot=!1}},{key:"render",value:function(){return Object(o.jsxs)("div",{children:[Object(u.a)(Object(p.a)(n.prototype),"render",this).call(this),Object(o.jsx)(H.a,{container:!0,spacing:1,children:Object(o.jsxs)(H.a,{container:!0,item:!0,xs:10,spacing:1,children:[Object(o.jsx)(H.a,{item:!0,xs:6,children:Object(o.jsx)(K.a,{id:"outlined-basic",label:"directory name to save image files",variant:"outlined"})}),Object(o.jsx)(H.a,{item:!0,xs:3,children:Object(o.jsx)(s.a,{variant:"contained",color:"primary",onClick:this.startRecord,children:"Start Record"})}),Object(o.jsx)(H.a,{item:!0,xs:3,children:Object(o.jsx)(s.a,{variant:"contained",color:"primary",onClick:this.stopRecord,children:"Stop Record"})})]})})]})}}]),n}(w),Z=n(52),W=n.n(Z),V=new Z.UnityContext({loaderUrl:"https://react-unity-test.s3-ap-northeast-1.amazonaws.com/Build/Build.loader.js",dataUrl:"https://react-unity-test.s3-ap-northeast-1.amazonaws.com/Build/Build.data",frameworkUrl:"https://react-unity-test.s3-ap-northeast-1.amazonaws.com/Build/Build.framework.js",codeUrl:"https://react-unity-test.s3-ap-northeast-1.amazonaws.com/Build/Build.wasm"});var q=function(){return Object(o.jsxs)("div",{className:"App",children:[Object(o.jsxs)("div",{children:[Object(o.jsx)("button",{onClick:function(){V.send("Player","MoveLeft")},children:"left"}),Object(o.jsx)("button",{onClick:function(){V.send("Player","MoveRight")},children:"right"})]}),Object(o.jsx)(W.a,{unityContext:V,style:{width:"80%",height:"600px"}})]})},G={bmBurgerButton:{position:"fixed",width:"36px",height:"30px",left:"36px",top:"56px"},bmBurgerBars:{background:"#373a47"},bmBurgerBarsHover:{background:"#a90000"},bmCrossButton:{height:"24px",width:"24px"},bmCross:{background:"#bdc3c7"},bmMenuWrap:{position:"fixed",top:"0px",height:"100%"},bmMenu:{background:"#373a47",padding:"0.5em 1.2em 0",fontSize:"1.4em"},bmMorphShape:{fill:"#373a47"},bmItemList:{color:"#b8b7ad",padding:"0.8em"},bmItem:{display:"inline-block",padding:"0.6em",color:"#fffce1",outline:"none"},bmOverlay:{background:"rgba(0, 0, 0, 0.3)"}},J=function(e){Object(b.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(l.a)(this,n);for(var o=arguments.length,a=new Array(o),c=0;c<o;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).testSceneRef=i.a.createRef(),e.digitSceneRef=i.a.createRef(),e.financialSceneRef=i.a.createRef(),e.MDSceneRef=i.a.createRef(),e.onStateChange=function(e){console.log(e.isOpen)},e}return Object(d.a)(n,[{key:"render",value:function(){var e=this;return Object(o.jsx)("div",{className:"App",children:Object(o.jsxs)(x.bubble,{styles:G,onStateChange:this.onStateChange,children:[Object(o.jsx)("a",{id:"test_scene",className:"menu-item",href:"/#",onClick:function(t){r.a.render(Object(o.jsx)(_,{width:.9*window.innerWidth,height:.9*window.innerHeight,cameraPos:{x:5,y:5,z:5},ref:e.testSceneRef}),document.getElementById("scene")),t.preventDefault()},children:"Test Scene"}),Object(o.jsx)("a",{id:"digit_distribution_scene",className:"menu-item",href:"/#",onClick:function(t){r.a.render(Object(o.jsx)(B,{width:.9*window.innerWidth,height:.9*window.innerHeight,cameraPos:{x:5,y:5,z:5},ref:e.digitSceneRef}),document.getElementById("scene")),t.preventDefault()},children:"Digit Distribution Scene"}),Object(o.jsx)("a",{id:"financial_distribution_scene",className:"menu-item",href:"/#",onClick:function(t){r.a.render(Object(o.jsx)(Y,{width:.9*window.innerWidth,height:.9*window.innerHeight,cameraPos:{x:5,y:5,z:5},ref:e.financialSceneRef}),document.getElementById("scene")),t.preventDefault()},children:"Financial Distribution Scene"}),Object(o.jsx)("a",{id:"md_scene",className:"menu-item",href:"/#",onClick:function(t){r.a.render(Object(o.jsx)(X,{width:.9*window.innerWidth,height:.9*window.innerHeight,cameraPos:{x:5,y:5,z:5},ref:e.MDSceneRef}),document.getElementById("scene")),t.preventDefault()},children:"MD Scene"}),Object(o.jsx)("a",{id:"md_scene",className:"menu-item",href:"/#",onClick:function(e){r.a.render(Object(o.jsx)(q,{}),document.getElementById("scene")),e.preventDefault()},children:"Unity Scene"})]})})}}]),n}(i.a.Component),Q=(n(129),i.a.createRef()),$=i.a.createRef(),ee=function(){};var te=function(){return Object(o.jsxs)("div",{className:"App",children:[Object(o.jsx)(J,{}),Object(o.jsx)("div",{id:"scene",children:Object(o.jsx)(_,{width:.9*window.innerWidth,height:.9*window.innerHeight,cameraPos:{x:5,y:5,z:5}})}),Object(o.jsx)(s.a,{variant:"contained",color:"primary",onClick:ee,ref:$,children:"Move Camera"}),Object(o.jsx)("text",{ref:Q})]})},ne=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,172)).then((function(t){var n=t.getCLS,o=t.getFID,a=t.getFCP,i=t.getLCP,c=t.getTTFB;n(e),o(e),a(e),i(e),c(e)}))};r.a.render(Object(o.jsx)(te,{}),document.getElementById("root")),ne()},86:function(e,t,n){}},[[130,1,2]]]);
//# sourceMappingURL=main.c4318131.chunk.js.map