{"version":3,"sources":["components/VRButton.js","components/OrbitControls.js","scenes/ThreeScene.tsx","utils/three/ObjectFactory.tsx","scenes/CoordinateAxisScene.tsx","scenes/TestBoxScene.tsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["VRButton","renderer","options","console","error","button","document","createElement","showWebXRNotFound","style","display","cursor","left","width","onmouseenter","onmouseleave","onclick","textContent","stylizeElement","element","position","bottom","padding","border","borderRadius","background","color","font","textAlign","opacity","outline","zIndex","navigator","id","xr","isSessionSupported","then","supported","currentSession","onSessionStarted","session","addEventListener","onSessionEnded","setSession","removeEventListener","requestSession","optionalFeatures","end","showEnterVR","message","window","isSecureContext","href","location","replace","innerHTML","textDecoration","OrbitControls","object","domElement","undefined","warn","this","enabled","target","Vector3","minDistance","maxDistance","Infinity","minZoom","maxZoom","minPolarAngle","maxPolarAngle","Math","PI","minAzimuthAngle","maxAzimuthAngle","enableDamping","dampingFactor","enableZoom","zoomSpeed","enableRotate","rotateSpeed","enablePan","panSpeed","screenSpacePanning","keyPanSpeed","autoRotate","autoRotateSpeed","keys","LEFT","UP","RIGHT","BOTTOM","mouseButtons","MOUSE","ROTATE","MIDDLE","DOLLY","PAN","touches","ONE","TOUCH","TWO","DOLLY_PAN","target0","clone","position0","zoom0","zoom","_domElementKeyEvents","getPolarAngle","spherical","phi","getAzimuthalAngle","theta","listenToKeyEvents","onKeyDown","saveState","scope","copy","reset","updateProjectionMatrix","dispatchEvent","changeEvent","update","state","STATE","NONE","offset","quat","Quaternion","setFromUnitVectors","up","quatInverse","invert","lastPosition","lastQuaternion","twoPI","sub","applyQuaternion","setFromVector3","rotateLeft","sphericalDelta","min","max","isFinite","makeSafe","radius","scale","addScaledVector","panOffset","add","setFromSpherical","lookAt","multiplyScalar","set","zoomChanged","distanceToSquared","EPS","dot","quaternion","dispose","onContextMenu","onPointerDown","onMouseWheel","onTouchStart","onTouchEnd","onTouchMove","ownerDocument","onPointerMove","onPointerUp","type","startEvent","endEvent","TOUCH_ROTATE","TOUCH_PAN","TOUCH_DOLLY_PAN","TOUCH_DOLLY_ROTATE","Spherical","rotateStart","Vector2","rotateEnd","rotateDelta","panStart","panEnd","panDelta","dollyStart","dollyEnd","dollyDelta","getZoomScale","pow","angle","rotateUp","panLeft","v","distance","objectMatrix","setFromMatrixColumn","panUp","crossVectors","pan","deltaX","deltaY","isPerspectiveCamera","targetDistance","length","tan","fov","clientHeight","matrix","isOrthographicCamera","right","clientWidth","top","dollyOut","dollyScale","dollyIn","handleMouseDownRotate","event","clientX","clientY","handleMouseDownPan","handleTouchStartRotate","pageX","pageY","x","y","handleTouchStartPan","handleTouchStartDolly","dx","dy","sqrt","handleTouchMoveRotate","subVectors","handleTouchMovePan","handleTouchMoveDolly","pointerType","mouseAction","preventDefault","focus","handleMouseDownDolly","ctrlKey","metaKey","shiftKey","onMouseDown","handleMouseMoveRotate","handleMouseMoveDolly","handleMouseMovePan","onMouseMove","onMouseUp","stopPropagation","handleMouseWheel","needsUpdate","keyCode","handleKeyDown","handleTouchStartDollyPan","DOLLY_ROTATE","handleTouchStartDollyRotate","handleTouchMoveDollyPan","handleTouchMoveDollyRotate","prototype","Object","create","EventDispatcher","constructor","MapControls","call","ThreeScene","props","_scene","_camera","_renderer","_container","_objects","_cnt","_orbitControls","_isKeyDown","_lookAt","THREE","_bgColor","camera_pos_x","height","cameraPos","z","antialias","setSize","bgColor","setClearColor","onButtonClick","bind","createObjects","handleKeyUp","map","obj","appendChild","start","ReactDOM","render","body","createButton","key","stop","removeChild","setAnimationLoop","remove","apply","children","ambientLight","spotLight","castShadow","sunLight","push","onObjectsUpdated","setState","ref","container","Button","variant","onClick","React","Component","ObjectFactory","pos_x","pos_y","pos_z","sphereRadius","sphereGeometry","sphereMaterial","transparent","side","depthWrite","sphere","size_x","size_y","size_z","box","receiveShadow","rotation_x","rotation_y","rotation_z","size_h","size_w","planeGeometry","planeMaterial","plane","rotation","name","dir_x","dir_y","dir_z","headWidth","headLength","dir","pos","arrowHelper","material","sprite","tube","tubularSegments","radiusSegments","p","q","roughness","geometry","torus","CoordinateAxisScene","forceUpdate","cnt","objs","tag","OF","createArrow","objType","TestBoxScene","idx","findIndex","isKeyPressed","createTorusKnot","App","className","innerWidth","innerHeight","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","getElementById"],"mappings":"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","file":"static/js/main.e4c259f3.chunk.js","sourcesContent":["class VRButton {\n\n\tstatic createButton( renderer, options ) {\n\n\t\tif ( options ) {\n\n\t\t\tconsole.error( 'THREE.VRButton: The \"options\" parameter has been removed. Please set the reference space type via renderer.xr.setReferenceSpaceType() instead.' );\n\n\t\t}\n\n\t\tconst button = document.createElement( 'button' );\n\n\t\tfunction showEnterVR( /*device*/ ) {\n\n\t\t\tlet currentSession = null;\n\n\t\t\tfunction onSessionStarted( session ) {\n\n\t\t\t\tsession.addEventListener( 'end', onSessionEnded );\n\n\t\t\t\trenderer.xr.setSession( session );\n\t\t\t\tbutton.textContent = 'EXIT VR';\n\n\t\t\t\tcurrentSession = session;\n\n\t\t\t}\n\n\t\t\tfunction onSessionEnded( /*event*/ ) {\n\n\t\t\t\tcurrentSession.removeEventListener( 'end', onSessionEnded );\n\n\t\t\t\tbutton.textContent = 'ENTER VR';\n\n\t\t\t\tcurrentSession = null;\n\n\t\t\t}\n\n\t\t\t//\n\n\t\t\tbutton.style.display = '';\n\n\t\t\tbutton.style.cursor = 'pointer';\n\t\t\tbutton.style.left = 'calc(50% - 50px)';\n\t\t\tbutton.style.width = '100px';\n\n\t\t\tbutton.textContent = 'ENTER VR';\n\n\t\t\tbutton.onmouseenter = function () {\n\n\t\t\t\tbutton.style.opacity = '1.0';\n\n\t\t\t};\n\n\t\t\tbutton.onmouseleave = function () {\n\n\t\t\t\tbutton.style.opacity = '0.5';\n\n\t\t\t};\n\n\t\t\tbutton.onclick = function () {\n\n\t\t\t\tif ( currentSession === null ) {\n\n\t\t\t\t\t// WebXR's requestReferenceSpace only works if the corresponding feature\n\t\t\t\t\t// was requested at session creation time. For simplicity, just ask for\n\t\t\t\t\t// the interesting ones as optional features, but be aware that the\n\t\t\t\t\t// requestReferenceSpace call will fail if it turns out to be unavailable.\n\t\t\t\t\t// ('local' is always available for immersive sessions and doesn't need to\n\t\t\t\t\t// be requested separately.)\n\n\t\t\t\t\tconst sessionInit = { optionalFeatures: [ 'local-floor', 'bounded-floor', 'hand-tracking' ] };\n\t\t\t\t\tnavigator.xr.requestSession( 'immersive-vr', sessionInit ).then( onSessionStarted );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tcurrentSession.end();\n\n\t\t\t\t}\n\n\t\t\t};\n\n\t\t}\n\n\t\tfunction disableButton() {\n\n\t\t\tbutton.style.display = '';\n\n\t\t\tbutton.style.cursor = 'auto';\n\t\t\tbutton.style.left = 'calc(50% - 75px)';\n\t\t\tbutton.style.width = '150px';\n\n\t\t\tbutton.onmouseenter = null;\n\t\t\tbutton.onmouseleave = null;\n\n\t\t\tbutton.onclick = null;\n\n\t\t}\n\n\t\tfunction showWebXRNotFound() {\n\n\t\t\tdisableButton();\n\n\t\t\tbutton.textContent = 'VR NOT SUPPORTED';\n\n\t\t}\n\n\t\tfunction stylizeElement( element ) {\n\n\t\t\telement.style.position = 'absolute';\n\t\t\telement.style.bottom = '20px';\n\t\t\telement.style.padding = '12px 6px';\n\t\t\telement.style.border = '1px solid #fff';\n\t\t\telement.style.borderRadius = '4px';\n\t\t\telement.style.background = 'rgba(0,0,0,0.1)';\n\t\t\telement.style.color = '#fff';\n\t\t\telement.style.font = 'normal 13px sans-serif';\n\t\t\telement.style.textAlign = 'center';\n\t\t\telement.style.opacity = '0.5';\n\t\t\telement.style.outline = 'none';\n\t\t\telement.style.zIndex = '999';\n\n\t\t}\n\n\t\tif ( 'xr' in navigator ) {\n\n\t\t\tbutton.id = 'VRButton';\n\t\t\tbutton.style.display = 'none';\n\n\t\t\tstylizeElement( button );\n\n\t\t\tnavigator.xr.isSessionSupported( 'immersive-vr' ).then( function ( supported ) {\n\n\t\t\t\tsupported ? showEnterVR() : showWebXRNotFound();\n\n\t\t\t} );\n\n\t\t\treturn button;\n\n\t\t} else {\n\n\t\t\tconst message = document.createElement( 'a' );\n\n\t\t\tif ( window.isSecureContext === false ) {\n\n\t\t\t\tmessage.href = document.location.href.replace( /^http:/, 'https:' );\n\t\t\t\tmessage.innerHTML = 'WEBXR NEEDS HTTPS'; // TODO Improve message\n\n\t\t\t} else {\n\n\t\t\t\tmessage.href = 'https://immersiveweb.dev/';\n\t\t\t\tmessage.innerHTML = 'WEBXR NOT AVAILABLE';\n\n\t\t\t}\n\n\t\t\tmessage.style.left = 'calc(50% - 90px)';\n\t\t\tmessage.style.width = '180px';\n\t\t\tmessage.style.textDecoration = 'none';\n\n\t\t\tstylizeElement( message );\n\n\t\t\treturn message;\n\n\t\t}\n\n\t}\n\n}\n\nexport { VRButton };","/* eslint-disable */\nimport {\n\tEventDispatcher,\n\tMOUSE,\n\tQuaternion,\n\tSpherical,\n\tTOUCH,\n\tVector2,\n\tVector3\n} from 'three';\n\n// This set of controls performs orbiting, dollying (zooming), and panning.\n// Unlike TrackballControls, it maintains the \"up\" direction object.up (+Y by default).\n//\n//    Orbit - left mouse / touch: one-finger move\n//    Zoom - middle mouse, or mousewheel / touch: two-finger spread or squish\n//    Pan - right mouse, or left mouse + ctrl/meta/shiftKey, or arrow keys / touch: two-finger move\n\nvar OrbitControls = function ( object, domElement ) {\n\n\tif ( domElement === undefined ) console.warn( 'THREE.OrbitControls: The second parameter \"domElement\" is now mandatory.' );\n\tif ( domElement === document ) console.error( 'THREE.OrbitControls: \"document\" should not be used as the target \"domElement\". Please use \"renderer.domElement\" instead.' );\n\n\tthis.object = object;\n\tthis.domElement = domElement;\n\n\t// Set to false to disable this control\n\tthis.enabled = true;\n\n\t// \"target\" sets the location of focus, where the object orbits around\n\tthis.target = new Vector3();\n\n\t// How far you can dolly in and out ( PerspectiveCamera only )\n\tthis.minDistance = 0;\n\tthis.maxDistance = Infinity;\n\n\t// How far you can zoom in and out ( OrthographicCamera only )\n\tthis.minZoom = 0;\n\tthis.maxZoom = Infinity;\n\n\t// How far you can orbit vertically, upper and lower limits.\n\t// Range is 0 to Math.PI radians.\n\tthis.minPolarAngle = 0; // radians\n\tthis.maxPolarAngle = Math.PI; // radians\n\n\t// How far you can orbit horizontally, upper and lower limits.\n\t// If set, the interval [ min, max ] must be a sub-interval of [ - 2 PI, 2 PI ], with ( max - min < 2 PI )\n\tthis.minAzimuthAngle = - Infinity; // radians\n\tthis.maxAzimuthAngle = Infinity; // radians\n\n\t// Set to true to enable damping (inertia)\n\t// If damping is enabled, you must call controls.update() in your animation loop\n\tthis.enableDamping = false;\n\tthis.dampingFactor = 0.05;\n\n\t// This option actually enables dollying in and out; left as \"zoom\" for backwards compatibility.\n\t// Set to false to disable zooming\n\tthis.enableZoom = true;\n\tthis.zoomSpeed = 1.0;\n\n\t// Set to false to disable rotating\n\tthis.enableRotate = true;\n\tthis.rotateSpeed = 1.0;\n\n\t// Set to false to disable panning\n\tthis.enablePan = true;\n\tthis.panSpeed = 1.0;\n\tthis.screenSpacePanning = true; // if false, pan orthogonal to world-space direction camera.up\n\tthis.keyPanSpeed = 7.0;\t// pixels moved per arrow key push\n\n\t// Set to true to automatically rotate around the target\n\t// If auto-rotate is enabled, you must call controls.update() in your animation loop\n\tthis.autoRotate = false;\n\tthis.autoRotateSpeed = 2.0; // 30 seconds per round when fps is 60\n\n\t// The four arrow keys\n\tthis.keys = { LEFT: 37, UP: 38, RIGHT: 39, BOTTOM: 40 };\n\n\t// Mouse buttons\n\tthis.mouseButtons = { LEFT: MOUSE.ROTATE, MIDDLE: MOUSE.DOLLY, RIGHT: MOUSE.PAN };\n\n\t// Touch fingers\n\tthis.touches = { ONE: TOUCH.ROTATE, TWO: TOUCH.DOLLY_PAN };\n\n\t// for reset\n\tthis.target0 = this.target.clone();\n\tthis.position0 = this.object.position.clone();\n\tthis.zoom0 = this.object.zoom;\n\n\t// the target DOM element for key events\n\tthis._domElementKeyEvents = null;\n\n\t//\n\t// public methods\n\t//\n\n\tthis.getPolarAngle = function () {\n\n\t\treturn spherical.phi;\n\n\t};\n\n\tthis.getAzimuthalAngle = function () {\n\n\t\treturn spherical.theta;\n\n\t};\n\n\tthis.listenToKeyEvents = function ( domElement ) {\n\n\t\tdomElement.addEventListener( 'keydown', onKeyDown );\n\t\tthis._domElementKeyEvents = domElement;\n\n\t};\n\n\tthis.saveState = function () {\n\n\t\tscope.target0.copy( scope.target );\n\t\tscope.position0.copy( scope.object.position );\n\t\tscope.zoom0 = scope.object.zoom;\n\n\t};\n\n\tthis.reset = function () {\n\n\t\tscope.target.copy( scope.target0 );\n\t\tscope.object.position.copy( scope.position0 );\n\t\tscope.object.zoom = scope.zoom0;\n\n\t\tscope.object.updateProjectionMatrix();\n\t\tscope.dispatchEvent( changeEvent );\n\n\t\tscope.update();\n\n\t\tstate = STATE.NONE;\n\n\t};\n\n\t// this method is exposed, but perhaps it would be better if we can make it private...\n\tthis.update = function () {\n\n\t\tvar offset = new Vector3();\n\n\t\t// so camera.up is the orbit axis\n\t\tvar quat = new Quaternion().setFromUnitVectors( object.up, new Vector3( 0, 1, 0 ) );\n\t\tvar quatInverse = quat.clone().invert();\n\n\t\tvar lastPosition = new Vector3();\n\t\tvar lastQuaternion = new Quaternion();\n\n\t\tvar twoPI = 2 * Math.PI;\n\n\t\treturn function update() {\n\n\t\t\tvar position = scope.object.position;\n\n\t\t\toffset.copy( position ).sub( scope.target );\n\n\t\t\t// rotate offset to \"y-axis-is-up\" space\n\t\t\toffset.applyQuaternion( quat );\n\n\t\t\t// angle from z-axis around y-axis\n\t\t\tspherical.setFromVector3( offset );\n\n\t\t\tif ( scope.autoRotate && state === STATE.NONE ) {\n\n\t\t\t\trotateLeft( getAutoRotationAngle() );\n\n\t\t\t}\n\n\t\t\tif ( scope.enableDamping ) {\n\n\t\t\t\tspherical.theta += sphericalDelta.theta * scope.dampingFactor;\n\t\t\t\tspherical.phi += sphericalDelta.phi * scope.dampingFactor;\n\n\t\t\t} else {\n\n\t\t\t\tspherical.theta += sphericalDelta.theta;\n\t\t\t\tspherical.phi += sphericalDelta.phi;\n\n\t\t\t}\n\n\t\t\t// restrict theta to be between desired limits\n\n\t\t\tvar min = scope.minAzimuthAngle;\n\t\t\tvar max = scope.maxAzimuthAngle;\n\n\t\t\tif ( isFinite( min ) && isFinite( max ) ) {\n\n\t\t\t\tif ( min < - Math.PI ) min += twoPI; else if ( min > Math.PI ) min -= twoPI;\n\n\t\t\t\tif ( max < - Math.PI ) max += twoPI; else if ( max > Math.PI ) max -= twoPI;\n\n\t\t\t\tif ( min <= max ) {\n\n\t\t\t\t\tspherical.theta = Math.max( min, Math.min( max, spherical.theta ) );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tspherical.theta = ( spherical.theta > ( min + max ) / 2 ) ?\n\t\t\t\t\t\tMath.max( min, spherical.theta ) :\n\t\t\t\t\t\tMath.min( max, spherical.theta );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// restrict phi to be between desired limits\n\t\t\tspherical.phi = Math.max( scope.minPolarAngle, Math.min( scope.maxPolarAngle, spherical.phi ) );\n\n\t\t\tspherical.makeSafe();\n\n\n\t\t\tspherical.radius *= scale;\n\n\t\t\t// restrict radius to be between desired limits\n\t\t\tspherical.radius = Math.max( scope.minDistance, Math.min( scope.maxDistance, spherical.radius ) );\n\n\t\t\t// move target to panned location\n\n\t\t\tif ( scope.enableDamping === true ) {\n\n\t\t\t\tscope.target.addScaledVector( panOffset, scope.dampingFactor );\n\n\t\t\t} else {\n\n\t\t\t\tscope.target.add( panOffset );\n\n\t\t\t}\n\n\t\t\toffset.setFromSpherical( spherical );\n\n\t\t\t// rotate offset back to \"camera-up-vector-is-up\" space\n\t\t\toffset.applyQuaternion( quatInverse );\n\n\t\t\tposition.copy( scope.target ).add( offset );\n\n\t\t\tscope.object.lookAt( scope.target );\n\n\t\t\tif ( scope.enableDamping === true ) {\n\n\t\t\t\tsphericalDelta.theta *= ( 1 - scope.dampingFactor );\n\t\t\t\tsphericalDelta.phi *= ( 1 - scope.dampingFactor );\n\n\t\t\t\tpanOffset.multiplyScalar( 1 - scope.dampingFactor );\n\n\t\t\t} else {\n\n\t\t\t\tsphericalDelta.set( 0, 0, 0 );\n\n\t\t\t\tpanOffset.set( 0, 0, 0 );\n\n\t\t\t}\n\n\t\t\tscale = 1;\n\n\t\t\t// update condition is:\n\t\t\t// min(camera displacement, camera rotation in radians)^2 > EPS\n\t\t\t// using small-angle approximation cos(x/2) = 1 - x^2 / 8\n\n\t\t\tif ( zoomChanged ||\n\t\t\t\tlastPosition.distanceToSquared( scope.object.position ) > EPS ||\n\t\t\t\t8 * ( 1 - lastQuaternion.dot( scope.object.quaternion ) ) > EPS ) {\n\n\t\t\t\tscope.dispatchEvent( changeEvent );\n\n\t\t\t\tlastPosition.copy( scope.object.position );\n\t\t\t\tlastQuaternion.copy( scope.object.quaternion );\n\t\t\t\tzoomChanged = false;\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\t\t\treturn false;\n\n\t\t};\n\n\t}();\n\n\tthis.dispose = function () {\n\n\t\tscope.domElement.removeEventListener( 'contextmenu', onContextMenu );\n\n\t\tscope.domElement.removeEventListener( 'pointerdown', onPointerDown );\n\t\tscope.domElement.removeEventListener( 'wheel', onMouseWheel );\n\n\t\tscope.domElement.removeEventListener( 'touchstart', onTouchStart );\n\t\tscope.domElement.removeEventListener( 'touchend', onTouchEnd );\n\t\tscope.domElement.removeEventListener( 'touchmove', onTouchMove );\n\n\t\tscope.domElement.ownerDocument.removeEventListener( 'pointermove', onPointerMove );\n\t\tscope.domElement.ownerDocument.removeEventListener( 'pointerup', onPointerUp );\n\n\n\t\tif ( scope._domElementKeyEvents !== null ) {\n\n\t\t\tscope._domElementKeyEvents.removeEventListener( 'keydown', onKeyDown );\n\n\t\t}\n\n\t\t//scope.dispatchEvent( { type: 'dispose' } ); // should this be added here?\n\n\t};\n\n\t//\n\t// internals\n\t//\n\n\tvar scope = this;\n\n\tvar changeEvent = { type: 'change' };\n\tvar startEvent = { type: 'start' };\n\tvar endEvent = { type: 'end' };\n\n\tvar STATE = {\n\t\tNONE: - 1,\n\t\tROTATE: 0,\n\t\tDOLLY: 1,\n\t\tPAN: 2,\n\t\tTOUCH_ROTATE: 3,\n\t\tTOUCH_PAN: 4,\n\t\tTOUCH_DOLLY_PAN: 5,\n\t\tTOUCH_DOLLY_ROTATE: 6\n\t};\n\n\tvar state = STATE.NONE;\n\n\tvar EPS = 0.000001;\n\n\t// current position in spherical coordinates\n\tvar spherical = new Spherical();\n\tvar sphericalDelta = new Spherical();\n\n\tvar scale = 1;\n\tvar panOffset = new Vector3();\n\tvar zoomChanged = false;\n\n\tvar rotateStart = new Vector2();\n\tvar rotateEnd = new Vector2();\n\tvar rotateDelta = new Vector2();\n\n\tvar panStart = new Vector2();\n\tvar panEnd = new Vector2();\n\tvar panDelta = new Vector2();\n\n\tvar dollyStart = new Vector2();\n\tvar dollyEnd = new Vector2();\n\tvar dollyDelta = new Vector2();\n\n\tfunction getAutoRotationAngle() {\n\n\t\treturn 2 * Math.PI / 60 / 60 * scope.autoRotateSpeed;\n\n\t}\n\n\tfunction getZoomScale() {\n\n\t\treturn Math.pow( 0.95, scope.zoomSpeed );\n\n\t}\n\n\tfunction rotateLeft( angle ) {\n\n\t\tsphericalDelta.theta -= angle;\n\n\t}\n\n\tfunction rotateUp( angle ) {\n\n\t\tsphericalDelta.phi -= angle;\n\n\t}\n\n\tvar panLeft = function () {\n\n\t\tvar v = new Vector3();\n\n\t\treturn function panLeft( distance, objectMatrix ) {\n\n\t\t\tv.setFromMatrixColumn( objectMatrix, 0 ); // get X column of objectMatrix\n\t\t\tv.multiplyScalar( - distance );\n\n\t\t\tpanOffset.add( v );\n\n\t\t};\n\n\t}();\n\n\tvar panUp = function () {\n\n\t\tvar v = new Vector3();\n\n\t\treturn function panUp( distance, objectMatrix ) {\n\n\t\t\tif ( scope.screenSpacePanning === true ) {\n\n\t\t\t\tv.setFromMatrixColumn( objectMatrix, 1 );\n\n\t\t\t} else {\n\n\t\t\t\tv.setFromMatrixColumn( objectMatrix, 0 );\n\t\t\t\tv.crossVectors( scope.object.up, v );\n\n\t\t\t}\n\n\t\t\tv.multiplyScalar( distance );\n\n\t\t\tpanOffset.add( v );\n\n\t\t};\n\n\t}();\n\n\t// deltaX and deltaY are in pixels; right and down are positive\n\tvar pan = function () {\n\n\t\tvar offset = new Vector3();\n\n\t\treturn function pan( deltaX, deltaY ) {\n\n\t\t\tvar element = scope.domElement;\n\n\t\t\tif ( scope.object.isPerspectiveCamera ) {\n\n\t\t\t\t// perspective\n\t\t\t\tvar position = scope.object.position;\n\t\t\t\toffset.copy( position ).sub( scope.target );\n\t\t\t\tvar targetDistance = offset.length();\n\n\t\t\t\t// half of the fov is center to top of screen\n\t\t\t\ttargetDistance *= Math.tan( ( scope.object.fov / 2 ) * Math.PI / 180.0 );\n\n\t\t\t\t// we use only clientHeight here so aspect ratio does not distort speed\n\t\t\t\tpanLeft( 2 * deltaX * targetDistance / element.clientHeight, scope.object.matrix );\n\t\t\t\tpanUp( 2 * deltaY * targetDistance / element.clientHeight, scope.object.matrix );\n\n\t\t\t} else if ( scope.object.isOrthographicCamera ) {\n\n\t\t\t\t// orthographic\n\t\t\t\tpanLeft( deltaX * ( scope.object.right - scope.object.left ) / scope.object.zoom / element.clientWidth, scope.object.matrix );\n\t\t\t\tpanUp( deltaY * ( scope.object.top - scope.object.bottom ) / scope.object.zoom / element.clientHeight, scope.object.matrix );\n\n\t\t\t} else {\n\n\t\t\t\t// camera neither orthographic nor perspective\n\t\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.' );\n\t\t\t\tscope.enablePan = false;\n\n\t\t\t}\n\n\t\t};\n\n\t}();\n\n\tfunction dollyOut( dollyScale ) {\n\n\t\tif ( scope.object.isPerspectiveCamera ) {\n\n\t\t\tscale /= dollyScale;\n\n\t\t} else if ( scope.object.isOrthographicCamera ) {\n\n\t\t\tscope.object.zoom = Math.max( scope.minZoom, Math.min( scope.maxZoom, scope.object.zoom * dollyScale ) );\n\t\t\tscope.object.updateProjectionMatrix();\n\t\t\tzoomChanged = true;\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.' );\n\t\t\tscope.enableZoom = false;\n\n\t\t}\n\n\t}\n\n\tfunction dollyIn( dollyScale ) {\n\n\t\tif ( scope.object.isPerspectiveCamera ) {\n\n\t\t\tscale *= dollyScale;\n\n\t\t} else if ( scope.object.isOrthographicCamera ) {\n\n\t\t\tscope.object.zoom = Math.max( scope.minZoom, Math.min( scope.maxZoom, scope.object.zoom / dollyScale ) );\n\t\t\tscope.object.updateProjectionMatrix();\n\t\t\tzoomChanged = true;\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.' );\n\t\t\tscope.enableZoom = false;\n\n\t\t}\n\n\t}\n\n\t//\n\t// event callbacks - update the object state\n\t//\n\n\tfunction handleMouseDownRotate( event ) {\n\n\t\trotateStart.set( event.clientX, event.clientY );\n\n\t}\n\n\tfunction handleMouseDownDolly( event ) {\n\n\t\tdollyStart.set( event.clientX, event.clientY );\n\n\t}\n\n\tfunction handleMouseDownPan( event ) {\n\n\t\tpanStart.set( event.clientX, event.clientY );\n\n\t}\n\n\tfunction handleMouseMoveRotate( event ) {\n\n\t\trotateEnd.set( event.clientX, event.clientY );\n\n\t\trotateDelta.subVectors( rotateEnd, rotateStart ).multiplyScalar( scope.rotateSpeed );\n\n\t\tvar element = scope.domElement;\n\n\t\trotateLeft( 2 * Math.PI * rotateDelta.x / element.clientHeight ); // yes, height\n\n\t\trotateUp( 2 * Math.PI * rotateDelta.y / element.clientHeight );\n\n\t\trotateStart.copy( rotateEnd );\n\n\t\tscope.update();\n\n\t}\n\n\tfunction handleMouseMoveDolly( event ) {\n\n\t\tdollyEnd.set( event.clientX, event.clientY );\n\n\t\tdollyDelta.subVectors( dollyEnd, dollyStart );\n\n\t\tif ( dollyDelta.y > 0 ) {\n\n\t\t\tdollyOut( getZoomScale() );\n\n\t\t} else if ( dollyDelta.y < 0 ) {\n\n\t\t\tdollyIn( getZoomScale() );\n\n\t\t}\n\n\t\tdollyStart.copy( dollyEnd );\n\n\t\tscope.update();\n\n\t}\n\n\tfunction handleMouseMovePan( event ) {\n\n\t\tpanEnd.set( event.clientX, event.clientY );\n\n\t\tpanDelta.subVectors( panEnd, panStart ).multiplyScalar( scope.panSpeed );\n\n\t\tpan( panDelta.x, panDelta.y );\n\n\t\tpanStart.copy( panEnd );\n\n\t\tscope.update();\n\n\t}\n\n\tfunction handleMouseUp( /*event*/ ) {\n\n\t\t// no-op\n\n\t}\n\n\tfunction handleMouseWheel( event ) {\n\n\t\tif ( event.deltaY < 0 ) {\n\n\t\t\tdollyIn( getZoomScale() );\n\n\t\t} else if ( event.deltaY > 0 ) {\n\n\t\t\tdollyOut( getZoomScale() );\n\n\t\t}\n\n\t\tscope.update();\n\n\t}\n\n\tfunction handleKeyDown( event ) {\n\n\t\tvar needsUpdate = false;\n\n\t\tswitch ( event.keyCode ) {\n\n\t\t\tcase scope.keys.UP:\n\t\t\t\tpan( 0, scope.keyPanSpeed );\n\t\t\t\tneedsUpdate = true;\n\t\t\t\tbreak;\n\n\t\t\tcase scope.keys.BOTTOM:\n\t\t\t\tpan( 0, - scope.keyPanSpeed );\n\t\t\t\tneedsUpdate = true;\n\t\t\t\tbreak;\n\n\t\t\tcase scope.keys.LEFT:\n\t\t\t\tpan( scope.keyPanSpeed, 0 );\n\t\t\t\tneedsUpdate = true;\n\t\t\t\tbreak;\n\n\t\t\tcase scope.keys.RIGHT:\n\t\t\t\tpan( - scope.keyPanSpeed, 0 );\n\t\t\t\tneedsUpdate = true;\n\t\t\t\tbreak;\n\n\t\t}\n\n\t\tif ( needsUpdate ) {\n\n\t\t\t// prevent the browser from scrolling on cursor keys\n\t\t\tevent.preventDefault();\n\n\t\t\tscope.update();\n\n\t\t}\n\n\n\t}\n\n\tfunction handleTouchStartRotate( event ) {\n\n\t\tif ( event.touches.length == 1 ) {\n\n\t\t\trotateStart.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\n\n\t\t} else {\n\n\t\t\tvar x = 0.5 * ( event.touches[ 0 ].pageX + event.touches[ 1 ].pageX );\n\t\t\tvar y = 0.5 * ( event.touches[ 0 ].pageY + event.touches[ 1 ].pageY );\n\n\t\t\trotateStart.set( x, y );\n\n\t\t}\n\n\t}\n\n\tfunction handleTouchStartPan( event ) {\n\n\t\tif ( event.touches.length == 1 ) {\n\n\t\t\tpanStart.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\n\n\t\t} else {\n\n\t\t\tvar x = 0.5 * ( event.touches[ 0 ].pageX + event.touches[ 1 ].pageX );\n\t\t\tvar y = 0.5 * ( event.touches[ 0 ].pageY + event.touches[ 1 ].pageY );\n\n\t\t\tpanStart.set( x, y );\n\n\t\t}\n\n\t}\n\n\tfunction handleTouchStartDolly( event ) {\n\n\t\tvar dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX;\n\t\tvar dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY;\n\n\t\tvar distance = Math.sqrt( dx * dx + dy * dy );\n\n\t\tdollyStart.set( 0, distance );\n\n\t}\n\n\tfunction handleTouchStartDollyPan( event ) {\n\n\t\tif ( scope.enableZoom ) handleTouchStartDolly( event );\n\n\t\tif ( scope.enablePan ) handleTouchStartPan( event );\n\n\t}\n\n\tfunction handleTouchStartDollyRotate( event ) {\n\n\t\tif ( scope.enableZoom ) handleTouchStartDolly( event );\n\n\t\tif ( scope.enableRotate ) handleTouchStartRotate( event );\n\n\t}\n\n\tfunction handleTouchMoveRotate( event ) {\n\n\t\tif ( event.touches.length == 1 ) {\n\n\t\t\trotateEnd.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\n\n\t\t} else {\n\n\t\t\tvar x = 0.5 * ( event.touches[ 0 ].pageX + event.touches[ 1 ].pageX );\n\t\t\tvar y = 0.5 * ( event.touches[ 0 ].pageY + event.touches[ 1 ].pageY );\n\n\t\t\trotateEnd.set( x, y );\n\n\t\t}\n\n\t\trotateDelta.subVectors( rotateEnd, rotateStart ).multiplyScalar( scope.rotateSpeed );\n\n\t\tvar element = scope.domElement;\n\n\t\trotateLeft( 2 * Math.PI * rotateDelta.x / element.clientHeight ); // yes, height\n\n\t\trotateUp( 2 * Math.PI * rotateDelta.y / element.clientHeight );\n\n\t\trotateStart.copy( rotateEnd );\n\n\t}\n\n\tfunction handleTouchMovePan( event ) {\n\n\t\tif ( event.touches.length == 1 ) {\n\n\t\t\tpanEnd.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\n\n\t\t} else {\n\n\t\t\tvar x = 0.5 * ( event.touches[ 0 ].pageX + event.touches[ 1 ].pageX );\n\t\t\tvar y = 0.5 * ( event.touches[ 0 ].pageY + event.touches[ 1 ].pageY );\n\n\t\t\tpanEnd.set( x, y );\n\n\t\t}\n\n\t\tpanDelta.subVectors( panEnd, panStart ).multiplyScalar( scope.panSpeed );\n\n\t\tpan( panDelta.x, panDelta.y );\n\n\t\tpanStart.copy( panEnd );\n\n\t}\n\n\tfunction handleTouchMoveDolly( event ) {\n\n\t\tvar dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX;\n\t\tvar dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY;\n\n\t\tvar distance = Math.sqrt( dx * dx + dy * dy );\n\n\t\tdollyEnd.set( 0, distance );\n\n\t\tdollyDelta.set( 0, Math.pow( dollyEnd.y / dollyStart.y, scope.zoomSpeed ) );\n\n\t\tdollyOut( dollyDelta.y );\n\n\t\tdollyStart.copy( dollyEnd );\n\n\t}\n\n\tfunction handleTouchMoveDollyPan( event ) {\n\n\t\tif ( scope.enableZoom ) handleTouchMoveDolly( event );\n\n\t\tif ( scope.enablePan ) handleTouchMovePan( event );\n\n\t}\n\n\tfunction handleTouchMoveDollyRotate( event ) {\n\n\t\tif ( scope.enableZoom ) handleTouchMoveDolly( event );\n\n\t\tif ( scope.enableRotate ) handleTouchMoveRotate( event );\n\n\t}\n\n\tfunction handleTouchEnd( /*event*/ ) {\n\n\t\t// no-op\n\n\t}\n\n\t//\n\t// event handlers - FSM: listen for events and reset state\n\t//\n\n\tfunction onPointerDown( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\tswitch ( event.pointerType ) {\n\n\t\t\tcase 'mouse':\n\t\t\tcase 'pen':\n\t\t\t\tonMouseDown( event );\n\t\t\t\tbreak;\n\n\t\t\t// TODO touch\n\n\t\t}\n\n\t}\n\n\tfunction onPointerMove( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\tswitch ( event.pointerType ) {\n\n\t\t\tcase 'mouse':\n\t\t\tcase 'pen':\n\t\t\t\tonMouseMove( event );\n\t\t\t\tbreak;\n\n\t\t\t// TODO touch\n\n\t\t}\n\n\t}\n\n\tfunction onPointerUp( event ) {\n\n\t\tswitch ( event.pointerType ) {\n\n\t\t\tcase 'mouse':\n\t\t\tcase 'pen':\n\t\t\t\tonMouseUp( event );\n\t\t\t\tbreak;\n\n\t\t\t// TODO touch\n\n\t\t}\n\n\t}\n\n\tfunction onMouseDown( event ) {\n\n\t\t// Prevent the browser from scrolling.\n\t\tevent.preventDefault();\n\n\t\t// Manually set the focus since calling preventDefault above\n\t\t// prevents the browser from setting it automatically.\n\n\t\tscope.domElement.focus ? scope.domElement.focus() : window.focus();\n\n\t\tvar mouseAction;\n\n\t\tswitch ( event.button ) {\n\n\t\t\tcase 0:\n\n\t\t\t\tmouseAction = scope.mouseButtons.LEFT;\n\t\t\t\tbreak;\n\n\t\t\tcase 1:\n\n\t\t\t\tmouseAction = scope.mouseButtons.MIDDLE;\n\t\t\t\tbreak;\n\n\t\t\tcase 2:\n\n\t\t\t\tmouseAction = scope.mouseButtons.RIGHT;\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\n\t\t\t\tmouseAction = - 1;\n\n\t\t}\n\n\t\tswitch ( mouseAction ) {\n\n\t\t\tcase MOUSE.DOLLY:\n\n\t\t\t\tif ( scope.enableZoom === false ) return;\n\n\t\t\t\thandleMouseDownDolly( event );\n\n\t\t\t\tstate = STATE.DOLLY;\n\n\t\t\t\tbreak;\n\n\t\t\tcase MOUSE.ROTATE:\n\n\t\t\t\tif ( event.ctrlKey || event.metaKey || event.shiftKey ) {\n\n\t\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\t\thandleMouseDownPan( event );\n\n\t\t\t\t\tstate = STATE.PAN;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\t\thandleMouseDownRotate( event );\n\n\t\t\t\t\tstate = STATE.ROTATE;\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase MOUSE.PAN:\n\n\t\t\t\tif ( event.ctrlKey || event.metaKey || event.shiftKey ) {\n\n\t\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\t\thandleMouseDownRotate( event );\n\n\t\t\t\t\tstate = STATE.ROTATE;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\t\thandleMouseDownPan( event );\n\n\t\t\t\t\tstate = STATE.PAN;\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\n\t\t\t\tstate = STATE.NONE;\n\n\t\t}\n\n\t\tif ( state !== STATE.NONE ) {\n\n\t\t\tscope.domElement.ownerDocument.addEventListener( 'pointermove', onPointerMove );\n\t\t\tscope.domElement.ownerDocument.addEventListener( 'pointerup', onPointerUp );\n\n\t\t\tscope.dispatchEvent( startEvent );\n\n\t\t}\n\n\t}\n\n\tfunction onMouseMove( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\tevent.preventDefault();\n\n\t\tswitch ( state ) {\n\n\t\t\tcase STATE.ROTATE:\n\n\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\thandleMouseMoveRotate( event );\n\n\t\t\t\tbreak;\n\n\t\t\tcase STATE.DOLLY:\n\n\t\t\t\tif ( scope.enableZoom === false ) return;\n\n\t\t\t\thandleMouseMoveDolly( event );\n\n\t\t\t\tbreak;\n\n\t\t\tcase STATE.PAN:\n\n\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\thandleMouseMovePan( event );\n\n\t\t\t\tbreak;\n\n\t\t}\n\n\t}\n\n\tfunction onMouseUp( event ) {\n\n\t\tscope.domElement.ownerDocument.removeEventListener( 'pointermove', onPointerMove );\n\t\tscope.domElement.ownerDocument.removeEventListener( 'pointerup', onPointerUp );\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\thandleMouseUp( event );\n\n\t\tscope.dispatchEvent( endEvent );\n\n\t\tstate = STATE.NONE;\n\n\t}\n\n\tfunction onMouseWheel( event ) {\n\n\t\tif ( scope.enabled === false || scope.enableZoom === false || ( state !== STATE.NONE && state !== STATE.ROTATE ) ) return;\n\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tscope.dispatchEvent( startEvent );\n\n\t\thandleMouseWheel( event );\n\n\t\tscope.dispatchEvent( endEvent );\n\n\t}\n\n\tfunction onKeyDown( event ) {\n\n\t\tif ( scope.enabled === false || scope.enablePan === false ) return;\n\n\t\thandleKeyDown( event );\n\n\t}\n\n\tfunction onTouchStart( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\tevent.preventDefault(); // prevent scrolling\n\n\t\tswitch ( event.touches.length ) {\n\n\t\t\tcase 1:\n\n\t\t\t\tswitch ( scope.touches.ONE ) {\n\n\t\t\t\t\tcase TOUCH.ROTATE:\n\n\t\t\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\t\t\thandleTouchStartRotate( event );\n\n\t\t\t\t\t\tstate = STATE.TOUCH_ROTATE;\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase TOUCH.PAN:\n\n\t\t\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\t\t\thandleTouchStartPan( event );\n\n\t\t\t\t\t\tstate = STATE.TOUCH_PAN;\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\n\t\t\t\t\t\tstate = STATE.NONE;\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase 2:\n\n\t\t\t\tswitch ( scope.touches.TWO ) {\n\n\t\t\t\t\tcase TOUCH.DOLLY_PAN:\n\n\t\t\t\t\t\tif ( scope.enableZoom === false && scope.enablePan === false ) return;\n\n\t\t\t\t\t\thandleTouchStartDollyPan( event );\n\n\t\t\t\t\t\tstate = STATE.TOUCH_DOLLY_PAN;\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase TOUCH.DOLLY_ROTATE:\n\n\t\t\t\t\t\tif ( scope.enableZoom === false && scope.enableRotate === false ) return;\n\n\t\t\t\t\t\thandleTouchStartDollyRotate( event );\n\n\t\t\t\t\t\tstate = STATE.TOUCH_DOLLY_ROTATE;\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\n\t\t\t\t\t\tstate = STATE.NONE;\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\n\t\t\t\tstate = STATE.NONE;\n\n\t\t}\n\n\t\tif ( state !== STATE.NONE ) {\n\n\t\t\tscope.dispatchEvent( startEvent );\n\n\t\t}\n\n\t}\n\n\tfunction onTouchMove( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\tevent.preventDefault(); // prevent scrolling\n\t\tevent.stopPropagation();\n\n\t\tswitch ( state ) {\n\n\t\t\tcase STATE.TOUCH_ROTATE:\n\n\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\thandleTouchMoveRotate( event );\n\n\t\t\t\tscope.update();\n\n\t\t\t\tbreak;\n\n\t\t\tcase STATE.TOUCH_PAN:\n\n\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\thandleTouchMovePan( event );\n\n\t\t\t\tscope.update();\n\n\t\t\t\tbreak;\n\n\t\t\tcase STATE.TOUCH_DOLLY_PAN:\n\n\t\t\t\tif ( scope.enableZoom === false && scope.enablePan === false ) return;\n\n\t\t\t\thandleTouchMoveDollyPan( event );\n\n\t\t\t\tscope.update();\n\n\t\t\t\tbreak;\n\n\t\t\tcase STATE.TOUCH_DOLLY_ROTATE:\n\n\t\t\t\tif ( scope.enableZoom === false && scope.enableRotate === false ) return;\n\n\t\t\t\thandleTouchMoveDollyRotate( event );\n\n\t\t\t\tscope.update();\n\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\n\t\t\t\tstate = STATE.NONE;\n\n\t\t}\n\n\t}\n\n\tfunction onTouchEnd( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\thandleTouchEnd( event );\n\n\t\tscope.dispatchEvent( endEvent );\n\n\t\tstate = STATE.NONE;\n\n\t}\n\n\tfunction onContextMenu( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\tevent.preventDefault();\n\n\t}\n\n\t//\n\n\tscope.domElement.addEventListener( 'contextmenu', onContextMenu );\n\n\tscope.domElement.addEventListener( 'pointerdown', onPointerDown );\n\tscope.domElement.addEventListener( 'wheel', onMouseWheel );\n\n\tscope.domElement.addEventListener( 'touchstart', onTouchStart );\n\tscope.domElement.addEventListener( 'touchend', onTouchEnd );\n\tscope.domElement.addEventListener( 'touchmove', onTouchMove );\n\n\t// force an update at start\n\n\tthis.update();\n\n};\n\nOrbitControls.prototype = Object.create( EventDispatcher.prototype );\nOrbitControls.prototype.constructor = OrbitControls;\n\n\n// This set of controls performs orbiting, dollying (zooming), and panning.\n// Unlike TrackballControls, it maintains the \"up\" direction object.up (+Y by default).\n// This is very similar to OrbitControls, another set of touch behavior\n//\n//    Orbit - right mouse, or left mouse + ctrl/meta/shiftKey / touch: two-finger rotate\n//    Zoom - middle mouse, or mousewheel / touch: two-finger spread or squish\n//    Pan - left mouse, or arrow keys / touch: one-finger move\n\nvar MapControls = function ( object, domElement ) {\n\n\tOrbitControls.call( this, object, domElement );\n\n\tthis.screenSpacePanning = false; // pan orthogonal to world-space direction camera.up\n\n\tthis.mouseButtons.LEFT = MOUSE.PAN;\n\tthis.mouseButtons.RIGHT = MOUSE.ROTATE;\n\n\tthis.touches.ONE = TOUCH.PAN;\n\tthis.touches.TWO = TOUCH.DOLLY_ROTATE;\n\n};\n\nMapControls.prototype = Object.create( EventDispatcher.prototype );\nMapControls.prototype.constructor = MapControls;\n\nexport { OrbitControls, MapControls };\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport * as THREE from 'three';\nimport Button from '@material-ui/core/Button';\nimport { VRButton } from '../components/VRButton';\nimport { OrbitControls } from '../components/OrbitControls';\n\n\ntype PosVec3 = {\n  x: number,\n  y: number,\n  z: number,\n};\n\nexport type ThreeObject = {\n  tag?: string,\n  obj: THREE.Mesh | THREE.ArrowHelper | THREE.Sprite,\n  objType: 'box' | 'sphere' | 'plane' | 'sprite' | 'arrow' | 'other',\n}\n\nexport type ThreeObjects = ThreeObject[];\n\nexport interface Props {\n  width: number,\n  height: number,\n  cameraPos: PosVec3,\n  onObjectsChanged?: (objs: ThreeObjects) => {},\n  lookAt?: PosVec3,\n  bgColor?: THREE.Color\n};\n\n\nexport abstract class ThreeScene extends React.Component<Props> {\n\n  protected _scene: THREE.Scene;\n  protected _camera: THREE.PerspectiveCamera;\n  protected _renderer: THREE.WebGLRenderer;\n  protected _container: HTMLDivElement | null = null;\n  protected _objects: ThreeObjects = [];\n  protected _cnt: number = 0;\n  protected _orbitControls: OrbitControls | null = null;\n  protected _isKeyDown: {[key: string]: boolean} = {};\n  protected _lookAt: THREE.Vector3 = new THREE.Vector3(0, 0, 0);\n  protected _bgColor: THREE.Color = new THREE.Color('#b4bad2');\n\n  state = {\n    camera_pos_x: 0\n  };\n\n  constructor(props: Props) {\n    super(props);\n\n    this._scene = new THREE.Scene();\n\n    const width = this.props.width;\n    const height = this.props.height;\n    this._camera = new THREE.PerspectiveCamera(\n      45,\n      width / height,\n      0.1,\n      1000\n    );\n\n    this._camera.position.x = this.props.cameraPos.x;\n    this._camera.position.y = this.props.cameraPos.y;\n    this._camera.position.z = this.props.cameraPos.z;\n\n    this._lookAt = props.lookAt === undefined ? \n        new THREE.Vector3(0, 0, 0) : \n        new THREE.Vector3(props.lookAt.x, props.lookAt.y, props.lookAt.z)\n    this._camera.lookAt(new THREE.Vector3(this._lookAt.x, this._lookAt.y, this._lookAt.z));\n\n    this._renderer = new THREE.WebGLRenderer({ antialias: true });\n    this._renderer.setSize(width, height);\n\n    if (props.bgColor !== undefined) {\n      this._bgColor = props.bgColor;\n    }\n    this._renderer.setClearColor(this._bgColor);\n    this._renderer.xr.enabled = true;\n\n    this.onButtonClick = this.onButtonClick.bind(this);\n    this.createObjects = this.createObjects.bind(this);\n    this.update = this.update.bind(this);\n    this.handleKeyDown = this.handleKeyDown.bind(this);\n    this.handleKeyUp = this.handleKeyUp.bind(this);\n  }\n\n  componentDidMount(): void {\n    this._objects.map(obj => this._scene.add(obj.obj));\n    if (this._container) {\n      this._container.appendChild(this._renderer.domElement);\n\n      this._orbitControls = new OrbitControls(this._camera, this._container);\n      this._orbitControls.target.set( 0, 0, 0 );\n      this._orbitControls.update();\n    }\n    this.start();\n    ReactDOM.render(<div id='vr_button'/>, document.body.appendChild(VRButton.createButton( this._renderer )));\n    window.addEventListener('keydown', this.handleKeyDown);\n    window.addEventListener('keyup', this.handleKeyUp);\n  }\n\n  handleKeyDown(event: KeyboardEvent): void {\n    this._isKeyDown[`key_${event.key}`] = true\n  }\n\n  handleKeyUp(event: KeyboardEvent): void {\n    this._isKeyDown[`key_${event.key}`] = false\n  }\n\n  isKeyPressed(key: string): boolean {\n    return this._isKeyDown[`key_${key}`]\n  }\n\n  componentWillUnmount(): void {\n    this.stop()\n    if (this._container) {\n      this._container.removeChild(this._renderer.domElement);\n    }\n  }\n\n  start(): void {\n    this._renderer.setAnimationLoop( () => {\n      this._cnt += 1;\n      this.update(this._cnt);\n      // this._orbitControls.update();\n      this._renderer.render(this._scene, this._camera);\n    })\n  }\n\n  stop(): void {\n  }\n\n  abstract update(cnt: number): void;\n\n  createObjects(): ThreeObjects {\n    return [];\n  }\n\n  onObjectsUpdated(): void {\n    this._scene.remove.apply(this._scene, this._scene.children);\n    this._objects.map(obj => this._scene.add(obj.obj));\n\n    const ambientLight = new THREE.AmbientLight(0x222222);\n    this._scene.add(ambientLight);\n\n    const spotLight = new THREE.SpotLight(0xffffff);\n    spotLight.position.set(10, 10, 10);\n    spotLight.castShadow = true;\n    this._scene.add(spotLight);\n\n    const sunLight = new THREE.DirectionalLight( 'rgb(255,255,255)', 1 );\n    this._scene.add(sunLight);\n  }\n\n  addObject(obj: ThreeObject): void {\n    this._objects.push(obj);\n    this.onObjectsUpdated();\n  }\n\n  onButtonClick(): void {\n    this._camera.position.x += 1;\n    this.setState({camera_pos_x: this.state.camera_pos_x + 1});\n  }\n\n  render() {\n    return (\n      <div>\n        <div\n          style={{ width: this.props.width, height: this.props.height }}\n          ref={(container) => { this._container = container }}\n        />\n        <Button variant=\"contained\" color=\"primary\" onClick={this.onButtonClick}>\n          {this._camera.position.x}\n        </Button>\n        <div id='vr_button'/>\n      </div>\n    )\n  }\n}\n\nexport default ThreeScene;\n","import * as THREE from 'three';\n\n\nexport class ObjectFactory {\n\n  static createSphere(\n    pos_x: number = 0.0,\n    pos_y: number = 0.0,\n    pos_z: number = 0.0,\n    radius: number = 1.0,\n    opacity: number = 1.0,\n    color: number = 0x22DD22,\n  ): THREE.Mesh {\n    const sphereRadius = radius;\n    const sphereGeometry = new THREE.SphereGeometry(sphereRadius, 20, 20);\n    const sphereMaterial = new THREE.MeshLambertMaterial({\n      color: color,\n      opacity: opacity,\n      transparent: true,\n      side: THREE.DoubleSide,\n      depthWrite: false\n    })\n    const sphere = new THREE.Mesh(sphereGeometry, sphereMaterial);\n\n    sphere.position.x = pos_x;\n    sphere.position.y = pos_y;\n    sphere.position.z = pos_z;\n    sphere.castShadow = true;\n\n    return sphere;\n  }\n\n  static createBox(\n    pos_x: number = 0,\n    pos_y: number = 0,\n    pos_z: number = 0,\n    size_x: number = 1.0,\n    size_y: number = 1.0,\n    size_z: number = 1.0,\n    opacity: number = 1.0,\n    color: number = 0xff0000,\n    side: THREE.Side = THREE.FrontSide\n  ): THREE.Mesh {\n    const box = new THREE.Mesh(\n        new THREE.BoxGeometry(size_x, size_y, size_z),\n        new THREE.MeshStandardMaterial({\n          color: color,\n          opacity: opacity,\n          transparent: true,\n          side: side,\n          depthWrite: false\n        })\n    );\n    box.receiveShadow = true;\n\n    box.position.set(pos_x, pos_y, pos_z);\n    return box;\n  }\n\n  static createPlane(\n    pos_x: number = 0,\n    pos_y: number = 0,\n    pos_z: number = 0,\n    rotation_x: number = -0.5*Math.PI, \n    rotation_y: number = 0,\n    rotation_z: number = 0,\n    color: number = 0xff0000,\n    size_h: number = 50,\n    size_w:number = 50,\n  ): THREE.Mesh {\n    const planeGeometry = new THREE.PlaneGeometry(size_w, size_h, 1, 1);\n    const planeMaterial = new THREE.MeshLambertMaterial({color: color});\n    const plane = new THREE.Mesh(planeGeometry, planeMaterial);\n    plane.receiveShadow = true;\n\n    plane.rotation.x = rotation_x;\n    plane.rotation.y = rotation_y;\n    plane.rotation.z = rotation_z;\n    plane.position.x = pos_x;\n    plane.position.y = pos_y;\n    plane.position.z = pos_z;\n\n    return plane;\n  }\n\n  static createArrow(\n    name: string,\n    pos_x: number = 0,\n    pos_y: number = 0,\n    pos_z: number = 0,\n    dir_x: number = 0,\n    dir_y: number = 1,\n    dir_z: number = 0,\n    rotation_x: number = -Math.PI,\n    rotation_y: number = 0,\n    rotation_z: number = 0,\n    length: number = 0.8,\n    color: number = 0x00ff00,\n    headWidth: number = 0.3,\n    headLength: number = 0.3\n  ): THREE.ArrowHelper {\n    const dir = new THREE.Vector3(dir_x, dir_y, dir_z);\n    const pos = new THREE.Vector3(pos_x, pos_y, pos_z);\n    const arrowHelper = new THREE.ArrowHelper(dir, pos, length, color, \n                                              headWidth, headLength);\n    arrowHelper.name = name;\n    arrowHelper.rotation.x = rotation_x;\n    arrowHelper.rotation.y = rotation_y;\n    arrowHelper.rotation.z = rotation_z;\n\n    return arrowHelper;\n  }\n\n  static createSprite(\n    pos_x: number = 0,\n    pos_y: number = 0,\n    pos_z: number = 0,\n    scale: number = 0.2,\n    color: number = 0x0000ee,\n  ): THREE.Sprite {\n    const material = new THREE.SpriteMaterial({color: color});\n    const sprite = new THREE.Sprite(material);\n    sprite.position.x = pos_x;\n    sprite.position.y = pos_y;\n    sprite.position.z = pos_z;\n    sprite.scale.x = scale;\n    sprite.scale.y = scale;\n    sprite.scale.z = scale;\n\n    return sprite;\n  }\n\n  static createTorusKnot(\n    pos_x: number = 0,\n    pos_y: number = 0,\n    pos_z: number = 0,\n    radius: number = 1,\n    tube: number = 0.4,\n    tubularSegments: number = 64,\n    radiusSegments: number = 8,\n    p: number = 2,\n    q: number = 3,\n    opacity: number = 1.0,\n    color: number = 0x6699FF,\n    roughness: number = 0.5,\n    side: THREE.Side = THREE.FrontSide\n  ): THREE.Mesh {\n    const geometry = new THREE.TorusKnotGeometry(\n      radius, tube, tubularSegments, radiusSegments, p, q\n    )\n    const material = new THREE.MeshStandardMaterial({\n      color: color,\n      opacity: opacity,\n      transparent: true,\n      side: side,\n      roughness: roughness,\n    })\n    const torus = new THREE.Mesh(geometry, material);\n    torus.position.set(pos_x, pos_y, pos_z);\n    return torus\n  }\n}\n\nexport default ObjectFactory;\n","import { Props as ThreeProps, ThreeScene, ThreeObjects } from './ThreeScene';\nimport { ObjectFactory as OF } from '../utils/three/ObjectFactory';\n\n\n// interface Props extends ThreeProps {\n//   axis_length: number;\n// }\nexport interface Props extends ThreeProps {};\n\n\nexport class CoordinateAxisScene extends ThreeScene {\n\n  // protected _axis_length: number = 1.0;\n\n  constructor(props: Props) {\n    super(props as ThreeProps);\n\n    // if (props.axis_length !== null) {\n    //   this._axis_length = props.axis_length;\n    // }\n\n    this.update = this.update.bind(this);\n    this.createObjects = this.createObjects.bind(this);\n\n    this.forceUpdate();\n  }\n\n  update(cnt: number): void {\n    // super.update(cnt);\n  }\n\n  createObjects(): ThreeObjects {\n    const objs: ThreeObjects = super.createObjects();\n\n    objs.push({\n      tag: 'x_axis',\n      obj: OF.createArrow(\n        'x_axis',\n        0, 0, 0,\n        1.0, 0.0, 0.0,\n        0.5*Math.PI, 0.0, 0,\n        6.0, //this._axis_length,\n        0xFF0000,\n        0.5, //this._axis_length/5,\n        0.5, //this._axis_length/5,\n      ),\n      objType: 'arrow'\n    })\n\n    objs.push({\n      tag: 'y_axis',\n      obj: OF.createArrow(\n        'y_axis',\n        0, 0, 0,\n        0.0, 1.0, 0.0,\n        0, 0.5*Math.PI, 0,\n        6.0,\n        0x00FF00,\n        0.6, 0.6,\n      ),\n      objType: 'arrow'\n    })\n\n    objs.push({\n      tag: 'z_axis',\n      obj: OF.createArrow(\n        'z_axis',\n        0, 0, 0,\n        0.0, 0.0, 1.0,\n        0, 0, 0.5*Math.PI,\n        6.0,\n        0x0000FF,\n        0.6, 0.6,\n      ),\n      objType: 'arrow'\n    }) \n    return objs;\n  }\n}\n\nexport default CoordinateAxisScene;\n","import { ThreeObjects } from './ThreeScene';\nimport { Props as CASProps, CoordinateAxisScene} from './CoordinateAxisScene';\nimport { ObjectFactory as OF } from '../utils/three/ObjectFactory';\n\n\nexport interface Props extends CASProps {};\n\n\nclass TestBoxScene extends CoordinateAxisScene {\n\n  constructor(props: Props) {\n    super(props);\n\n    this.update = this.update.bind(this);\n    this.createObjects = this.createObjects.bind(this);\n\n    this._objects = this.createObjects();\n    this.onObjectsUpdated();\n\n    this.forceUpdate();\n  }\n\n  update(cnt: number): void {\n    const idx = this._objects.findIndex(obj => obj.tag === 'box1');\n    this._objects[idx].obj.rotation.x += 0.01;\n    this._objects[idx].obj.rotation.y += 0.01;\n\n    if (this.isKeyPressed('ArrowUp')) {\n      this._objects[idx].obj.position.y += 0.1;\n    } \n    if (this.isKeyPressed('ArrowDown')) {\n      this._objects[idx].obj.position.y -= 0.1;\n    }\n    if (this.isKeyPressed('ArrowRight')) {\n      this._objects[idx].obj.position.x += 0.1;\n    }\n    if (this.isKeyPressed('ArrowLeft')) {\n      this._objects[idx].obj.position.x -= 0.1;\n    }\n    super.update(cnt);\n  }\n\n  createObjects(): ThreeObjects {\n    const objs = super.createObjects();\n\n    objs.push({\n      tag: 'box1',\n      obj: OF.createTorusKnot(\n        0.0, 0.0, 0.0,\n        // 0.1, 1, 6.7, 10, 3, 40\n      ),\n      objType: 'box'\n    }) \n    return objs;\n  }\n}\n\nexport default TestBoxScene;\n","import TestBoxScene from './scenes/TestBoxScene'\nimport './App.css';\n\n\nfunction App() {\n  return (\n    <div className=\"App\">      \n      <TestBoxScene width={0.9*window.innerWidth} height={0.9*window.innerHeight} cameraPos={{x: 5, y: 5, z: 5}}/>\n    </div>\n  );\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}